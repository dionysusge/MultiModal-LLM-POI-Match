# POIåŒ¹é…ç³»ç»Ÿ

**Author:** Dionysus  
**Contact:** WeChat: gzw1546484791 | Email: dionysusge58@gmail.com

## é¡¹ç›®ç®€ä»‹

POIåŒ¹é…ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„åœ°ç†ä½ç½®å…´è¶£ç‚¹ï¼ˆPoint of Interestï¼‰åŒ¹é…è§£å†³æ–¹æ¡ˆã€‚è¯¥ç³»ç»Ÿèƒ½å¤Ÿæ™ºèƒ½åŒ¹é…æ¥è‡ªä¸åŒåœ°å›¾æœåŠ¡å•†ï¼ˆç™¾åº¦åœ°å›¾ã€é«˜å¾·åœ°å›¾ï¼‰çš„POIæ•°æ®ï¼Œé€šè¿‡å¤šæ¨¡æ€ç‰¹å¾èåˆå’Œå¤§è¯­è¨€æ¨¡å‹å¢å¼ºæŠ€æœ¯ï¼Œå®ç°é«˜ç²¾åº¦çš„POIå®ä½“å¯¹é½ã€‚

## æ ¸å¿ƒç‰¹æ€§

### ğŸš€ å¤šæ¨¡æ€ç‰¹å¾èåˆ
- **æ–‡æœ¬ç‰¹å¾**ï¼šä½¿ç”¨Sentence-BERTæå–POIåç§°å’Œæè¿°çš„è¯­ä¹‰ç‰¹å¾
- **åœ°ç†ç‰¹å¾**ï¼šåŸºäºGeohashç¼–ç çš„ä½ç½®ä¿¡æ¯è¡¨ç¤º
- **å›¾ç¥ç»ç½‘ç»œ**ï¼šGATï¼ˆGraph Attention Networkï¼‰æ•è·POIé—´çš„ç©ºé—´å…³ç³»
- **LLMå¢å¼º**ï¼šæ”¯æŒå¤šç§å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œæ–‡æœ¬ç‰¹å¾å¢å¼º

### ğŸ¯ æ™ºèƒ½åŒ¹é…ç®—æ³•
- **äº¤äº’ç‰¹å¾æå–**ï¼šè®¡ç®—POIå¯¹ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€è·ç¦»ç­‰äº¤äº’ç‰¹å¾
- **æ·±åº¦å­¦ä¹ åˆ†ç±»å™¨**ï¼šåŸºäºMLPå’ŒLightGBMçš„æ··åˆåˆ†ç±»æ¨¡å‹
- **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒå¤§è§„æ¨¡POIæ•°æ®çš„é«˜æ•ˆå¤„ç†

### ğŸ”§ çµæ´»é…ç½®
- **å¤šç§LLMæ”¯æŒ**ï¼šHuggingFaceæ¨¡å‹ã€OLLAMAæœ¬åœ°æ¨¡å‹
- **è°ƒè¯•æ¨¡å¼**ï¼šæ”¯æŒå°æ•°æ®é›†å¿«é€Ÿæµ‹è¯•
- **ç¼“å­˜æœºåˆ¶**ï¼šæ™ºèƒ½ç¼“å­˜ä¸­é—´ç»“æœï¼Œæå‡å¤„ç†æ•ˆç‡

## é¡¹ç›®ç»“æ„

```
POI_delivery/
â”œâ”€â”€ data/                           # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ bd_chinese_data.csv        # ç™¾åº¦åœ°å›¾POIæ•°æ®
â”‚   â”œâ”€â”€ gd_chinese_data.csv        # é«˜å¾·åœ°å›¾POIæ•°æ®
â”‚   â””â”€â”€ match*.csv                 # æ ‡æ³¨åŒ¹é…æ•°æ®
â”œâ”€â”€ models/                         # æ¨¡å‹ç›®å½•
â”‚   â”œâ”€â”€ DialoGPT-small/            # å¯¹è¯ç”Ÿæˆæ¨¡å‹
â”‚   â”œâ”€â”€ Qwen3-0.6B/               # åƒé—®æ¨¡å‹
â”‚   â”œâ”€â”€ paraphrase-multilingual-MiniLM-L12-v2/  # å¤šè¯­è¨€å¥å­ç¼–ç å™¨
â”‚   â”œâ”€â”€ llm_text_enhancer.py      # LLMæ–‡æœ¬å¢å¼ºæ¨¡å—
â”‚   â””â”€â”€ multi_modal_fusion.py     # å¤šæ¨¡æ€èåˆæ¨¡å—
â”œâ”€â”€ outputs/                        # è¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ cache/                     # ç¼“å­˜æ–‡ä»¶
â”‚   â””â”€â”€ *.pkl                      # ç‰¹å¾å’Œæ¨¡å‹æ–‡ä»¶
â”œâ”€â”€ scripts/                        # è¾…åŠ©è„šæœ¬
â”œâ”€â”€ utils/                          # å·¥å…·æ¨¡å—
â”œâ”€â”€ main.py           # ä¸»è¦è®­ç»ƒè„šæœ¬
â”œâ”€â”€ modal_fusion_mlp.py           # æ¨¡æ€èåˆMLPæ¨¡å‹
â””â”€â”€ requirements.txt               # ä¾èµ–åŒ…åˆ—è¡¨
```

## ä¸»è¦è„šæœ¬è¯´æ˜

### main.py
**åŠŸèƒ½**ï¼šPOIåŒ¹é…ç³»ç»Ÿçš„ä¸»è¦è®­ç»ƒè„šæœ¬
- æ”¯æŒå¤šç§LLMæ¨¡å‹ï¼ˆHuggingFaceã€OLLAMAï¼‰
- é›†æˆæ–‡æœ¬åµŒå…¥ã€GATå›¾ç¥ç»ç½‘ç»œã€åœ°ç†ç¼–ç 
- æä¾›å®Œæ•´çš„è®­ç»ƒå’Œè¯„ä¼°æµç¨‹
- æ”¯æŒè°ƒè¯•æ¨¡å¼å’Œç¼“å­˜æœºåˆ¶

**ä¸»è¦ç‰¹æ€§**ï¼š
- å¤šæ¨¡æ€ç‰¹å¾æå–ï¼ˆæ–‡æœ¬ã€åœ°ç†ã€å›¾ç»“æ„ï¼‰
- LLMæ–‡æœ¬å¢å¼º
- GATå›¾æ³¨æ„åŠ›ç½‘ç»œ
- LightGBMåˆ†ç±»å™¨è®­ç»ƒ
- æ™ºèƒ½ç¼“å­˜ç®¡ç†

### modal_fusion_mlp.py
**åŠŸèƒ½**ï¼šä¼˜åŒ–çš„äº¤äº’ç‰¹å¾èåˆMLPæ¨¡å‹
- å®ç°é«˜æ•ˆçš„ç‰¹å¾äº¤äº’è®¡ç®—
- ä½¿ç”¨æ®‹å·®è¿æ¥å’Œæ‰¹å½’ä¸€åŒ–
- æ”¯æŒä½™å¼¦é€€ç«å­¦ä¹ ç‡è°ƒåº¦
- æä¾›è¯¦ç»†çš„æ¨¡å‹è¯„ä¼°æŒ‡æ ‡

**ä¸»è¦ç‰¹æ€§**ï¼š
- ä¼˜åŒ–çš„äº¤äº’ç‰¹å¾æå–å™¨
- æ®‹å·®å—è®¾è®¡
- æ‰¹å½’ä¸€åŒ–ç¨³å®šè®­ç»ƒ
- å¤šå±‚æ„ŸçŸ¥æœºåˆ†ç±»å™¨

## ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- Python 3.8+
- CUDA 11.0+ (å¯é€‰ï¼Œç”¨äºGPUåŠ é€Ÿ)
- å†…å­˜ï¼šå»ºè®®16GB+
- å­˜å‚¨ï¼šå»ºè®®10GB+å¯ç”¨ç©ºé—´

### æ ¸å¿ƒä¾èµ–
```
torch>=2.0.0
torch-geometric>=2.3.0
sentence-transformers>=2.2.0
transformers>=4.20.0
lightgbm>=3.3.0
pandas>=1.5.0
numpy>=1.21.0
scikit-learn>=1.1.0
```

## å®‰è£…æŒ‡å—

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd POI_delivery
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# Linux/Mac
source .venv/bin/activate
```

### 3. å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨æ¸…åæºåŠ é€Ÿå®‰è£…
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

### 4. å‡†å¤‡æ•°æ®
å°†POIæ•°æ®æ–‡ä»¶æ”¾ç½®åœ¨ `data/` ç›®å½•ä¸‹ï¼š
- `bd_chinese_data.csv`ï¼šç™¾åº¦åœ°å›¾POIæ•°æ®
- `gd_chinese_data.csv`ï¼šé«˜å¾·åœ°å›¾POIæ•°æ®  
- `match2.csv`ï¼šæ ‡æ³¨çš„åŒ¹é…å¯¹æ•°æ®

### 5. ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹
ç¡®ä¿ `models/` ç›®å½•ä¸‹åŒ…å«æ‰€éœ€çš„é¢„è®­ç»ƒæ¨¡å‹æ–‡ä»¶ã€‚

## ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¼€å§‹

#### 1. è°ƒè¯•æ¨¡å¼è®­ç»ƒ
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.venv\Scripts\activate

# ä½¿ç”¨HuggingFaceæ¨¡å‹è¿›è¡Œè°ƒè¯•
python main.py --debug --debug-limit 1000 --model-type huggingface --model-name models/DialoGPT-small

# ä½¿ç”¨OLLAMAæ¨¡å‹è¿›è¡Œè°ƒè¯•
python main.py --debug --debug-limit 1000 --model-type ollama --model-name qwen2.5:0.5b
```

#### 2. å®Œæ•´æ•°æ®è®­ç»ƒ
```bash
# ä½¿ç”¨HuggingFaceæ¨¡å‹
python main.py --model-type huggingface --model-name models/Qwen3-0.6B

# ä½¿ç”¨OLLAMAæ¨¡å‹
python main.py --model-type ollama --model-name qwen2.5:3b
```

#### 3. æ¨¡æ€èåˆMLPè®­ç»ƒ
```bash
python modal_fusion_mlp.py
```

### å‘½ä»¤è¡Œå‚æ•°

#### main.py å‚æ•°
```bash
--model-type        # LLMæ¨¡å‹ç±»å‹ [huggingface|ollama] (é»˜è®¤: huggingface)
--model-name        # æ¨¡å‹åç§°æˆ–è·¯å¾„ (é»˜è®¤: models/DialoGPT-small)
--ollama-url        # OLLAMAæœåŠ¡URL (é»˜è®¤: http://localhost:11434)
--debug             # å¯ç”¨è°ƒè¯•æ¨¡å¼
--debug-limit       # è°ƒè¯•æ¨¡å¼æ•°æ®é™åˆ¶ (é»˜è®¤: 1000)
--device            # è®¡ç®—è®¾å¤‡ [cuda|cpu] (é»˜è®¤: cuda)
```

#### ä½¿ç”¨ç¤ºä¾‹
```bash
# åŸºç¡€è®­ç»ƒ
python main.py

# è°ƒè¯•æ¨¡å¼ï¼Œä½¿ç”¨OLLAMAæ¨¡å‹
python main.py --model-type ollama --model-name qwen2.5:0.5b --debug --debug-limit 500

# ä½¿ç”¨CPUè®­ç»ƒ
python main.py --device cpu --debug

# ä½¿ç”¨æœ¬åœ°HuggingFaceæ¨¡å‹
python main.py --model-type huggingface --model-name models/Qwen3-0.6B
```

## è¾“å‡ºæ–‡ä»¶

è®­ç»ƒå®Œæˆåï¼Œç³»ç»Ÿä¼šåœ¨ `outputs/` ç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

### æ¨¡å‹æ–‡ä»¶
- `gat_classifier_model.pkl`ï¼šè®­ç»ƒå¥½çš„åˆ†ç±»å™¨æ¨¡å‹
- `final_matched_pairs.csv`ï¼šæœ€ç»ˆçš„POIåŒ¹é…ç»“æœ

### ç‰¹å¾æ–‡ä»¶
- `text_emb_*.pkl`ï¼šæ–‡æœ¬åµŒå…¥ç‰¹å¾
- `gat_emb_*.pkl`ï¼šGATå›¾åµŒå…¥ç‰¹å¾
- `enhanced_features_*.pkl`ï¼šå¢å¼ºç‰¹å¾å‘é‡

### è¯„ä¼°æŠ¥å‘Š
- `model_evaluation_report.txt`ï¼šè¯¦ç»†çš„æ¨¡å‹è¯„ä¼°æŠ¥å‘Š

## æ€§èƒ½ä¼˜åŒ–

### 1. å†…å­˜ä¼˜åŒ–
- ä½¿ç”¨æ‰¹å¤„ç†å‡å°‘å†…å­˜å ç”¨
- æ™ºèƒ½ç¼“å­˜æœºåˆ¶é¿å…é‡å¤è®¡ç®—
- æ”¯æŒè°ƒè¯•æ¨¡å¼å¿«é€ŸéªŒè¯

### 2. è®¡ç®—ä¼˜åŒ–
- GPUåŠ é€Ÿè®­ç»ƒï¼ˆæ”¯æŒCUDAï¼‰
- å¤šè¿›ç¨‹æ•°æ®åŠ è½½
- é«˜æ•ˆçš„ç‰¹å¾æå–ç®—æ³•

### 3. æ¨¡å‹ä¼˜åŒ–
- æ®‹å·®è¿æ¥æå‡æ¢¯åº¦æµ
- æ‰¹å½’ä¸€åŒ–ç¨³å®šè®­ç»ƒ
- å­¦ä¹ ç‡è°ƒåº¦ä¼˜åŒ–æ”¶æ•›

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. CUDAå†…å­˜ä¸è¶³
```bash
# ä½¿ç”¨CPUè®­ç»ƒ
python main.py --device cpu

# å‡å°‘æ‰¹å¤„ç†å¤§å°
# ä¿®æ”¹è„šæœ¬ä¸­çš„ TEXT_EMBEDDING_BATCH_SIZE å‚æ•°
```

#### 2. æ¨¡å‹æ–‡ä»¶ç¼ºå¤±
```bash
# æ£€æŸ¥modelsç›®å½•ç»“æ„
ls models/
# ç¡®ä¿åŒ…å«æ‰€éœ€çš„é¢„è®­ç»ƒæ¨¡å‹æ–‡ä»¶
```

#### 3. ä¾èµ–åŒ…å†²çª
```bash
# é‡æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
rm -rf .venv
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

#### 4. OLLAMAè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥OLLAMAæœåŠ¡çŠ¶æ€
curl http://localhost:11434/api/tags

# ä¿®æ”¹OLLAMA URL
python main.py --ollama-url http://your-ollama-server:11434
```

## å¼€å‘æŒ‡å—

### æ‰©å±•å¼€å‘
- æ–°å¢LLMæ¨¡å‹æ”¯æŒï¼šä¿®æ”¹ `models/llm_text_enhancer.py`
- æ–°å¢ç‰¹å¾æå–å™¨ï¼šæ‰©å±• `models/multi_modal_fusion.py`
- æ–°å¢åˆ†ç±»å™¨ï¼šä¿®æ”¹è®­ç»ƒè„šæœ¬çš„åˆ†ç±»å™¨éƒ¨åˆ†


## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒå¤šæ¨¡æ€POIåŒ¹é…
- é›†æˆLLMæ–‡æœ¬å¢å¼º
- æä¾›å®Œæ•´çš„è®­ç»ƒå’Œè¯„ä¼°æµç¨‹

---

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»ä½œè€…ï¼š
- WeChat: gzw1546484791
- Email: dionysusge58@gmail.com
